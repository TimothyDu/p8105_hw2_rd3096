---
title: "p8105_hw2_rd3096"
output: github_document
---

```{r setup}
library(tidyverse)
```

#problem1 

##load the nyc transit data and clean names
```{r}
nyc_subway=
  read_csv("./NYCSUB.csv",na=c("NA","",".")) %>% 
  janitor::clean_names()
```

##clean the data as requested 
```{r}
nyc_subway_clean=nyc_subway %>% 
  select(
    line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>% 
  mutate(
    entry=
      case_match(
      entry,
      "YES"~TRUE,
      "NO"~ FALSE),
      entry=as.logical(entry)
    )
```

## a short paragraph describing the dataset
The NYC subway dataset contains 1,868 rows and 19 columns. It includes variables such as line, which represents the subway line (e.g., "4 Avenue"), station_name for the subway station (e.g., "25th St"), geographical coordinates (station_latitude and station_longitude), and various subway routes from route1 to route11. Additionally, the dataset has information on the type of entrance (entrance_type), whether vending machines are available (vending), and whether the station is ADA compliant (ada).
For the cleaning process, I retained only the necessary variables and transformed the entry variable, which originally contained "YES" and "NO" as character values, into a logical format (TRUE/FALSE). After cleaning, the dataset consists of 1,868 observations and retains the 19 original columns. While the data is fairly tidy, further steps may be needed to handle the route variables, which are currently spread across multiple columns.

##Answer the Questions:
*How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St 8th Avenue; 125st Broadway; 125st Lenox); the distinct function may be useful here.

```{r}
distinct_stations=
  nyc_subway_clean %>% 
  distinct(station_name,line) %>% 
  nrow()
```
1. There are 465 number of distinct stations are stored in distinct_stations.

*How many stations are ADA compliant?
```{r}
ada_compliant_stations=
  nyc_subway_clean %>% 
  filter(ada==TRUE) %>% 
  nrow()
```
2. There are 468 stations are ADA compliant.

*What proportion of station entrances / exits without vending allow entrance?
```{r}
proportion_no_vending_allows_entry=
  nyc_subway_clean %>%
  filter(vending == "NO") %>%
  summarize(proportion = mean(entry))
```
3. 37.7% of station entrances / exits without vending allow entrance.

##reformat the data to make route number and rount names distinct variables
```{r}
nyc_subway_routes_clean= 
  nyc_subway_clean %>%
  mutate(across(route1:route11,as.character)) %>% 
  pivot_longer(
    route1:route11, 
    names_to = "route_number", 
    values_to = "route_name" 
  )
```

##number of distinct stations serve the A train
```{r}
a_train_stations=
  nyc_subway_routes_clean %>%
  filter(route_name == "A") %>% 
  distinct(station_name, line) %>% 
  nrow()
```
There are 60 disctinct stations serve the A train.

##number of distinct stations serve the A train that are complaint train
```{r}
# Find ADA-compliant stations that serve the A train
ada_compliant_a_train_stations=
  nyc_subway_routes_clean %>%
  filter(route_name == "A", ada == TRUE) %>%
  distinct(station_name, line) %>% 
  nrow()
```
Of the stations that serve the A train, 17 are ADA compliant

#problem 2
```{r}
library(readxl)
library(dplyr)
```

##read the Mr. Trash Wheel excel file and clean the data
```{r}
mr_trash_wheel=
  read_excel("./trashwheel.xlsx", sheet="Mr. Trash Wheel", skip=1) %>% janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(sports_balls=as.integer(round(sports_balls))) %>%
  select(dumpster:homes_powered) %>% 
mutate(trash_wheel = "Mr. Trash Wheel")
```
##read the Professor Trash Wheel excel file and clean the data
```{r}
professor_trash_wheel=
  read_excel("./trashwheel.xlsx", sheet="Professor Trash Wheel", skip=1) %>% janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  select(dumpster:homes_powered) %>% 
mutate(trash_wheel = "Professor. Trash Wheel")
```
##read the Professor Trash Wheel excel file and clean the data
```{r}
gwynnda_trash_wheel=
  read_excel("./trashwheel.xlsx", sheet="Gwynnda Trash Wheel", skip=1) %>% janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  select(dumpster:homes_powered) %>% 
mutate(trash_wheel = "Gwynnda. Trash Wheel")
```